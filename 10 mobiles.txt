CODE: 
# Topology TCP Simulation in NS2  
# Create a simulator object  
set ns [new Simulator]  
# Create NAM trace file  
set nf [open topology.nam w]  
$ns namtrace-all $nf  
# Create trace file for TCP simulation  
set tf [open star_topology.tr w]  
$ns trace-all $tf  
# Create nodes  
for {set i 0} {$i < 6} {incr i} {  
set n($i) [$ns node]  
}  
# Connect nodes in a star topology  
# Node 0 will be the central hub  
$ns duplex-link $n(0) $n(1) 2Mb 10ms DropTail  
$ns duplex-link $n(0) $n(2) 2Mb 10ms DropTail  
$ns duplex-link $n(0) $n(3) 2Mb 10ms DropTail  
$ns duplex-link $n(1) $n(0) 2Mb 10ms DropTail  
$ns duplex-link $n(2) $n(0) 2Mb 10ms DropTail  
$ns duplex-link $n(2) $n(4) 2Mb 10ms DropTail  
$ns duplex-link $n(3) $n(1) 2Mb 10ms DropTail  
$ns duplex-link $n(3) $n(0) 2Mb 10ms DropTail  
$ns duplex-link $n(3) $n(4) 2Mb 10ms DropTail  
$ns duplex-link $n(3) $n(5) 2Mb 10ms DropTail  
$ns duplex-link $n(4) $n(3) 2Mb 10ms DropTail  
$ns duplex-link $n(4) $n(2) 2Mb 10ms DropTail  
$ns duplex-link $n(4) $n(5) 2Mb 10ms DropTail  
$ns duplex-link $n(5) $n(4) 2Mb 10ms DropTail  
$ns duplex-link $n(5) $n(3) 2Mb 10ms DropTail  
# Enable TCP on nodes  
# TCP from Node 2 -> Node 4  
set tcp0 [new Agent/TCP]  
$ns attach-agent $n(2) $tcp0  
set sink0 [new Agent/TCPSink]  
$ns attach-agent $n(4) $sink0  
$ns connect $tcp0 $sink0  
# TCP from Node 1 -> Node 3  
set tcp1 [new Agent/TCP]  
$ns attach-agent $n(1) $tcp1  
set sink1 [new Agent/TCPSink]  
$ns attach-agent $n(3) $sink1  
$ns connect $tcp1 $sink1  
# Create FTP applications to generate traffic  
set ftp0 [new Application/FTP]  
$ftp0 attach-agent $tcp0  
$ftp0 set packetSize_ 1000 ;# default packet size  
$ftp0 set interval_ 0.001 ;# 1000 packets/sec  
set ftp1 [new Application/FTP]  
$ftp1 attach-agent $tcp1  
$ftp1 set packetSize_ 1000  
$ftp1 set interval_ 0.001  
# Schedule FTP transmissions  
$ns at 0.01 "$ftp0 start"  
$ns at 0.01 "$ftp1 start"  
$ns at 15.0 "$ftp0 stop"  
$ns at 15.0 "$ftp1 stop"  
# Finish simulation  
$ns at 15.01 "finish"  
proc finish {} {  
global ns nf tf  
$ns flush-trace  
close $nf  
close $tf  
exec nam topology.nam &  
exit 0  
}  
# Run the simulation  
$ns run 